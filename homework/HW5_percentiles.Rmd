---
title: "HW4 MD CityCrime"
---

In this assignment, we will be working with a dataset of total crimes reported by Maryland cities for two consecutive years. You'll load the data, calculate the violent and property crime rates for each city for both years, and then calculate the percentage change in the crime rates between the two years. You'll also write a short story based on your findings.

### Task 1: Load the Tidyverse and Janitor

You will need to load the tidyverse library and the janitor library

```{r}
library(tidyverse)
library(janitor)
```

Then you'll load the data from the web. The URL for the data is: https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_cities_crime_2019_2020.csv. You will create a dataframe called `md_cities` that contains the data from this URL.

### Task 2: Load the Data

```{r}
md_cities <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_cities_crime_2019_2020.csv")
```
### Task 3: Calculating Rates

Calculate violent and property crime rates for each city for both years using `mutate()`. You'll create four new columns: `violent_rate_2019`, `property_rate_2019`, `violent_rate_2020`, and `property_rate_2020`. You'll need to figure out the proper unit rate, given that there are varying populations. There's no perfect choice; choose the one that works best for you. Save the results to a new dataframe called `md_cities_rates`.

```{r}
md_cities_rates <- md_cities |> mutate(violent_rate_2019=(violent2019/pop2019)*10000, property_rate_2019=(property2019/pop2019)*10000, violent_rate_2020=(violent2020/pop2020)*10000, property_rate_2020=(property2020/pop2020)*10000)
```

### Task 4: Describe the Rates

Examine the new dataframe, `md_cities_rates`, by clicking on it in the Environment tab in RStudio and sorting by the rate columns. Write a couple of sentences about the results, comparing and contrasting the cities with the highest rates (both violent and property) in 2019 and 2020. Do you see any patterns? What does this tell you about crime in Maryland cities? What's the story here?

Baltimore and Ocean City top the list for violent crimes. Baltimore had the most in 2019 at just over 183 violent crimes per 10,000 residents, while Ocean City took the top spot in 2020 with almost 240 violent crimes per 10,000 residents. Many of the other cities with the highest violent crime rate are smaller locales  on the Eastern Shore or in Western Maryland, such as Princess Anne or Williamsport. Ocean City is also the highest in terms of property crimes. It had more than 1,000 property crimes per 10,000 residents in 2019 and 1,200 property crimes per 10,000 residents in 2020. That's more than 1 property crime for every 10 people. Smaller cities on the Eastern Shore or in Western Maryland also have higher property crime rates. Elkton, Oakland and Cambridge are all in the Top 5. For both violent and property crimes, outside of Western Maryland and the Eastern Shore, there are also many towns in Prince George's County, such as Bladensburg and Hyattsville. 

### Task 5: Calculate Percentage Change

Let's add two percentage change columns to your dataframe: one for violent crime rates and one for property crime rates. You'll calculate the percentage change between 2019 and 2020 for each city. Save the results to a new dataframe called `md_cities_change`.

```{r}
md_cities_change <- md_cities_rates |> mutate(property_change=((property_rate_2020-property_rate_2019)/property_rate_2019)*100, violent_change=((violent_rate_2020-violent_rate_2019)/violent_rate_2019)*100) 

```

### Task 7: Describe Percentage Changes

Look at the `md_cities_change` dataframe by clicking on it in the Environment tab in RStudio. Write a couple of sentences describing the percentage change results. What's more interesting here, the patterns or the outliers? What's the story in the data?

For both property crime rate and the violent crime rate, multiple cities had changes listed as "N/A," as they had zero reported in 2020 or in both years, or as "Inf," when property or violent crimes increased from 0 to any higher value. Otherwise, the highest violent crime rate increase was Edmonston in Prince George's County with an increase of more than 895 percent. Crisfield saw the highest property crime increase at just over 320 percent. The state's two largest cities both saw their violent crime rates decrease. Most of the largest cities saw their property crime rate decrease, while violent crime rates were more varied. Many of the cities with the highest crime rate increases were smaller rural communities or suburbs. Often, the increases in these communities was from one relatively smaller number to a slightly higher number. The overall trends are interesting, especially when looking at rural vs. urban communities or small towns vs. cities, but I think it'd be interesting to look at the outliers and find out what happened to cause such different changes compared to the rest of the state. Several D.C. suburbs saw property crime and violent crime rates jump by several hundred percent. Why? What's different there? Many of these communities are smaller, however, so the actual nominal increases are not always very large. 

### Task 8: Tell the Best Story

Write up a lede and nutgraf of a story with the _best_ story idea you've found in this assignment. The lede should be a single sentence that summarizes the most important information in the data. The nutgraf should be a paragraph that provides more context and explains why the data is important.

Edsmonton, a Prince's George's County community of about 1,500 people, saw its violent crime rate surge by more than 895% in 2020. 

The Washington, D.C. suburb's violent crime rate increase was the largest of any city in Maryland over the past year. But it wasn't alone. Several other local suburbs, including Poolesville, Kensington and Glenarden, all saw their violent crime rates more than double. While these communities may have seen the highest percentage increases, their total crime numbers, however, were still far smaller than other suburbs, with each seeing less than 10 reported violent crimes in 2020. 


### Task 9: Save Your Work and Put it on GitHub

Save this notebook, then commit it to your local repository. Push the changes to your GitHub repository and submit the URL for this file in ELMS.

### Task 10: 

Take the HW4_MD_CityCrime.Rmd notebook you worked on and add a section at the bottom called Task 10. Your task will be to take the violent crime rates for 2020 and do three things:

Using the 2020 violent crime rate, calculate the percentiles using `ntile()`. Save the results to a new dataframe called `md_cities_percentiles`. 
How many cities are above the 90th percentile?
Calculate the Interquartile Range of the 2020 violent crime rate using `summarize()` and R's `IQR()` function. The syntax is similar to how `mean()` works.
Do the results change your best story idea from the previous assignment? Why or why not?

ANSWER: There are 10 cities above the 90th percentile. The Interquartile range is 41.98895. The results do change my best story idea. Ocean City is listed at the 100th percentile for violent crime rate. And it had an 82 percent violent crime rate increase. I think it'd be interesting to look into how Ocean City compares to the rest of the state, and what is causing its dramatic crime rate. 


```{r}
md_cities_percentiles <- md_cities_change |> mutate(violent_rate_percentiles_2020 = ntile(violent_rate_2020, 100)) 

md_cities_percentiles |> summarize(
  violent_rate_IQR = IQR(violent_rate_2020, na.rm = TRUE))
  
```

